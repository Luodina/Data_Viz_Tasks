<!DOCTYPE html>
<html>

<head>
  <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-balham.css">
</head>

<body>
  <h1>
    <a class="navbar-brand" href="http://insideairbnb.com/get-the-data.html">
      AirBnB DataSet
    </a></h1>
  <div class="container">
    <div class="row" style="margin-top:20px">
      <div class="col-sm">
        <div>
          <div id="myGrid" style="height: 750px;width:1200px;" class="ag-theme-balham"></div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="listings.json"></script>
  <script type="text/javascript" charset="utf-8">
    let airbnbData = listings;
    console.log(listings)
    let columnDefs = [];
    let keys = Object.keys(listings[0]);
    let rowData = [];
    for (i = 0; i < keys.length; i++) {
      let col = {
        headerName: keys[i].toUpperCase(),
        field: keys[i].toLowerCase(), sortable: true, filter: true
      };
      columnDefs.push(col);
    }

    for (i = 0; i < listings.length; i++) {
      let row = {};
      for (j = 0; j < keys.length; j++) {
        row[keys[j].toLowerCase()] = listings[i][keys[j]]
      }
      rowData.push(row);
    }
    // let the grid know which columns and what data to use
    let gridOptions = {
      columnDefs: columnDefs,
      rowData: rowData
    };

    // lookup the container we want the Grid to use
    var eGridDiv = document.querySelector('#myGrid');

    // create the grid passing in the div to use together with the columns & data we want to use
    new agGrid.Grid(eGridDiv, gridOptions);
  </script>
</body>

</html>